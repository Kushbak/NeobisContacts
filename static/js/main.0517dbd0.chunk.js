(this.webpackJsonpcontacts=this.webpackJsonpcontacts||[]).push([[0],{108:function(e,t,a){e.exports={header:"Header_header__Wm0b7",logo:"Header_logo__vSV7w"}},109:function(e,t,a){e.exports=a.p+"static/media/logo.b6f07fb6.svg"},114:function(e,t,a){e.exports=a.p+"static/media/email.295e814c.svg"},115:function(e,t,a){e.exports=a.p+"static/media/internet.99f89efb.svg"},116:function(e,t,a){e.exports=a.p+"static/media/location.06a791e2.svg"},117:function(e,t,a){e.exports=a.p+"static/media/smartphone.30eebe89.svg"},118:function(e,t,a){e.exports=a.p+"static/media/sortAZ.c25fea94.svg"},119:function(e,t,a){e.exports=a.p+"static/media/sortZA.7126b71e.svg"},122:function(e,t,a){e.exports=a(248)},127:function(e,t,a){},128:function(e,t,a){},248:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(51),c=a.n(s),o=(a(127),a(128),a(108)),i=a.n(o),l=a(109),m=a.n(l),u=a(23),f=function(e){return r.a.createElement("div",{className:i.a.header},r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"logo"},r.a.createElement(u.b,{to:"/"},r.a.createElement("img",{src:m.a,alt:"logo"})))))},p=a(33),v=a(21),d=a.n(v),E=a(17),N=a(32),_=a(9),b=a(7),h=a(15),g=a(250),O=a(249),S=a(5),I=a.n(S),x=a(38),y=a.n(x),j=a(39),C=a.n(j),w=a(77),F=a(251),k=a(111),B=a(112).create({baseURL:"https://my-json-server.typicode.com/RomanChasovitin/demo-api/"}),T={users:[],favorites:[]},R=function(e){return{type:"GET_USERS",users:e}},U=function(e){return{type:"REMOVE_FAVORITE",favorite:e}},A=function(e){return{type:"SET_FAVORITES_FROM_LS",favorites:e}},J=function(e){return function(t){t(function(e){return{type:"GET_FAVORITES",favorite:e}}(e))}},L=Object(b.c)({usersData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USERS":return Object(E.a)(Object(E.a)({},e),{},{users:t.users});case"GET_FAVORITES":return Object(E.a)(Object(E.a)({},e),{},{favorites:[].concat(Object(w.a)(e.favorites),[t.favorite])});case"REMOVE_FAVORITE":return Object(E.a)(Object(E.a)({},e),{},{favorites:e.favorites.length>1?e.favorites.filter((function(e){return e.id!==t.favorite.id})):[]});case"SET_FAVORITES_FROM_LS":return Object(E.a)(Object(E.a)({},e),{},{favorites:Object(w.a)(t.favorites)});default:return e}},form:F.a}),V=Object(b.e)(L,Object(b.a)(k.a));window.store=V;var D=V,G=a(120),M=a(74),Z=a.n(M),W=function(e){var t=e.input,a=e.meta,n=Object(G.a)(e,["input","meta"]),s=a.error;return r.a.createElement("div",{className:Z.a.formControl+" "+(s?Z.a.error:"")},r.a.createElement("div",null," ",r.a.createElement("input",Object.assign({type:"text"},t,n,{autoComplete:"off"}))," "),s&&r.a.createElement("span",null,a.error))},Q=function(e){if(!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)&&e)return"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0432\u0432\u0435\u0434\u0435\u043d email"},q=function(e){if(!/^\+?[0-9]{6,16}$/i.test(e)&&e)return"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0432\u0432\u0435\u0434\u0435\u043d \u043d\u043e\u043c\u0435\u0440"},z=Object(O.a)({form:"contactDetails"})((function(e){var t=function(){var t=Object(N.a)(d.a.mark((function t(a){var n,r,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={firstName:a.firstName||e.user.firstName,lastName:a.lastName||e.user.lastName,city:a.city||e.user.city,country:a.country||e.user.country,phoneNumber:a.phoneNumber||e.user.phoneNumber,email:a.email||e.user.email,website:a.website||e.user.website},t.next=3,e.users.filter((function(t){return t.id!==e.user.id}));case 3:return r=t.sent,t.next=6,r.push(Object(E.a)(Object(E.a)({},e.user),n));case 6:return t.next=8,r.sort((function(e,t){return e.id-t.id}));case 8:return t.next=10,e.setUsers(r);case 10:for(s in localStorage.setItem("contacts",JSON.stringify(r)),a)a[s]="";case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:I.a.contactForms},r.a.createElement("form",{onSubmit:e.handleSubmit(t)},r.a.createElement("div",{className:I.a.inputBlock},r.a.createElement("p",{className:I.a.inputTitle},"First Name:"),r.a.createElement(g.a,{className:I.a.contactInput,name:"firstName",component:W,type:"text",placeholder:e.user.firstName})),r.a.createElement("div",{className:I.a.inputBlock},r.a.createElement("p",{className:I.a.inputTitle},"Last name:"),r.a.createElement(g.a,{className:I.a.contactInput,name:"lastName",component:W,type:"text",placeholder:e.user.lastName})),r.a.createElement("div",{className:I.a.inputBlock},r.a.createElement("p",{className:I.a.inputTitle},"City:"),r.a.createElement(g.a,{className:I.a.contactInput,name:"city",component:W,type:"text",placeholder:e.user.city})),r.a.createElement("div",{className:I.a.inputBlock},r.a.createElement("p",{className:I.a.inputTitle},"Country:"),r.a.createElement(g.a,{className:I.a.contactInput,name:"country",component:W,type:"text",placeholder:e.user.country})),r.a.createElement("div",{className:I.a.inputBlock},r.a.createElement("p",{className:I.a.inputTitle},"Phone Number:"),r.a.createElement(g.a,{className:I.a.contactInput,name:"phoneNumber",component:W,type:"text",placeholder:e.user.phoneNumber,validate:[q]})),r.a.createElement("div",{className:I.a.inputBlock},r.a.createElement("p",{className:I.a.inputTitle},"Email:"),r.a.createElement(g.a,{className:I.a.contactInput,name:"email",component:W,type:"text",placeholder:e.user.email,validate:[Q]})),r.a.createElement("div",{className:I.a.inputBlock},r.a.createElement("p",{className:I.a.inputTitle},"Website:"),r.a.createElement(g.a,{className:I.a.contactInput,name:"website",component:W,type:"text",placeholder:e.user.website})),r.a.createElement("button",{className:I.a.saveContact},"Save Contact")))})),H=Object(b.d)(_.e,Object(h.b)((function(e){return{users:e.usersData.users,favorites:e.usersData.favorites}}),{addToFavorites:J,removeFavorite:U,setUsers:R,setFavoritesFromLS:A}))((function(e){var t=Object(n.useState)(),a=Object(p.a)(t,2),s=a[0],c=a[1];Object(n.useEffect)((function(){!e.favorites.length&&JSON.parse(localStorage.getItem("favorites")).length&&e.setFavoritesFromLS(JSON.parse(localStorage.getItem("favorites")))}),[]);var o=Object(n.useRef)();o.current=e.favorites,Object(n.useEffect)((function(){c(e.match.params.userId)}),[]);var i=function(){var t=Object(N.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.favorites.some((function(e){return e.id===a.id}))){t.next=5;break}return t.next=3,e.addToFavorites(a);case 3:t.next=7;break;case 5:return t.next=7,e.removeFavorite(a);case 7:localStorage.setItem("favorites",JSON.stringify(o.current));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:I.a.contact},e.users.map((function(t){if(t.id===+s)return r.a.createElement("div",{className:I.a.contactInfo,key:t.id},r.a.createElement("div",{className:I.a.imgBlock},r.a.createElement("img",{src:t.image,alt:"profile",className:I.a.photo}),r.a.createElement("img",{src:e.favorites.length&&e.favorites.some((function(e){return e.id===t.id}))?y.a:C.a,onClick:function(){return i(t)},alt:"fav",className:I.a.favIcon})),r.a.createElement(z,{user:t,users:e.users,setUsers:e.setUsers}))})))})),P=a(8),$=a.n(P),X=a(114),Y=a.n(X),K=a(115),ee=a.n(K),te=a(116),ae=a.n(te),ne=a(117),re=a.n(ne),se=a(118),ce=a.n(se),oe=a(119),ie=a.n(oe),le=function(e){var t=e.users,a=e.setFavorites,n=e.isFavorites,s=e.favorites;return(n?s:t).map((function(e){return r.a.createElement("div",{className:$.a.contactItem,key:e.id},r.a.createElement("div",{className:$.a.photo},r.a.createElement("img",{src:e.image,alt:"profile"})),r.a.createElement("div",{className:$.a.textInfo},r.a.createElement("p",{className:$.a.name},e.firstName," ",e.lastName,r.a.createElement("span",{className:$.a.favorite,onClick:function(){return a(e)}},r.a.createElement("img",{src:s.length&&s.some((function(t){return t.id===e.id}))?y.a:C.a,alt:"favorite"}))),r.a.createElement("p",{className:$.a.location},r.a.createElement("img",{className:$.a.icon,src:ae.a,alt:"icon"}),e.city," city, ",e.country),r.a.createElement("p",{className:$.a.number},r.a.createElement("img",{className:$.a.icon,src:re.a,alt:"icon"}),e.phoneNumber),r.a.createElement("p",{className:$.a.website},r.a.createElement("img",{className:$.a.icon,src:ee.a,alt:"icon"}),e.website),r.a.createElement("p",{className:$.a.email},r.a.createElement("img",{className:$.a.icon,src:Y.a,alt:"icon"}),e.email),r.a.createElement("div",{className:$.a.btnBlock},r.a.createElement(u.b,{to:"/contact/".concat(e.id),className:$.a.showUser},"Show"))))}))},me=Object(h.b)((function(e){return{users:e.usersData.users,favorites:e.usersData.favorites}}),{addToFavorites:J,removeFavorite:U,setFavoritesFromLS:A,setUsers:R})((function(e){var t=e.users,a=e.favorites,s=e.setFavoritesFromLS,c=e.addToFavorites,o=e.removeFavorite,i=e.setUsers,l=Object(n.useState)(),m=Object(p.a)(l,2),u=m[0],f=m[1],v=Object(n.useState)(!1),E=Object(p.a)(v,2),_=E[0],b=E[1],h=Object(n.useRef)();h.current=a;var g=Object(n.useReducer)((function(e){return e+1}),0),O=Object(p.a)(g,2),S=(O[0],O[1]);Object(n.useEffect)((function(){!a.length&&JSON.parse(localStorage.getItem("favorites")).length&&s(JSON.parse(localStorage.getItem("favorites")))}),[a,s]);var I=function(){var e=Object(N.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.some((function(e){return e.id===t.id}))){e.next=5;break}return e.next=3,c(t);case 3:e.next=7;break;case 5:return e.next=7,o(t);case 7:localStorage.setItem("favorites",JSON.stringify(h.current));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(N.a)(d.a.mark((function e(a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.sort((function(e,t){if(a){if(e.firstName<t.firstName)return-1;if(t.firstName<e.firstName)return 1}else{if(e.firstName>t.firstName)return-1;if(t.firstName>e.firstName)return 1}}));case 2:n=e.sent,i(n),S();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:$.a.contactsBlock},r.a.createElement("div",{className:$.a.actionBars},r.a.createElement("div",{className:$.a.search},r.a.createElement("input",{type:"text",className:$.a.searchInput,onChange:function(e){return function(e){f(t.filter((function(t){var a=t.firstName+" "+t.lastName,n=t.lastName+" "+t.firstName;return-1!==a.toLowerCase().search(e.target.value.toLowerCase())||-1!==n.toLowerCase().search(e.target.value.toLowerCase())})))}(e)},placeholder:"type to search..."})),r.a.createElement("div",{className:$.a.actionButtons},r.a.createElement("span",{className:$.a.favoritesFilter,onClick:function(){return b(!_)}},r.a.createElement("img",{src:_?y.a:C.a,alt:"Favorites"})),r.a.createElement("span",{onClick:function(){return x(!0)}},r.a.createElement("img",{src:ce.a,alt:"az sort"})),r.a.createElement("span",{onClick:function(){return x(!1)}},r.a.createElement("img",{src:ie.a,alt:"za sort"})))),r.a.createElement("div",{className:$.a.contacts},u?r.a.createElement(le,{users:u,setFavorites:I,isFavorites:_,favorites:a}):r.a.createElement(le,{users:t,setFavorites:I,isFavorites:_,favorites:a})))})),ue=r.a.memo((function(e){var t=e.setUsers,a=e.getUsers,s=e.users;return null==localStorage.getItem("favorites")&&localStorage.setItem("favorites",JSON.stringify([])),Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("contacts"));e?t(e):a()}),[t,a]),r.a.createElement("div",{className:"App"},r.a.createElement(f,null),r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"wrapper"},r.a.createElement(_.a,{exact:!0,path:"/",render:function(){return r.a.createElement(me,{users:s})}}),r.a.createElement(_.a,{path:"/contact/:userId",render:function(){return r.a.createElement(H,null)}}))))})),fe=Object(h.b)((function(e){return{users:e.usersData.users,favorites:e.usersData.favorites}}),{getUsers:function(){return function(e){B.get("users").then((function(t){e(R(t.data.data)),localStorage.setItem("contacts",JSON.stringify(t.data.data))}))}},setUsers:R})(ue);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,null,r.a.createElement(h.a,{store:D},r.a.createElement(fe,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},38:function(e,t,a){e.exports=a.p+"static/media/favorite.edffeac8.svg"},39:function(e,t,a){e.exports=a.p+"static/media/nonfavorite.21f320e7.svg"},5:function(e,t,a){e.exports={imgBlock:"ContactInfo_imgBlock__yPJx2",photo:"ContactInfo_photo__2aAub",favIcon:"ContactInfo_favIcon__37pSc",contactForms:"ContactInfo_contactForms__1b_IS",contactInput:"ContactInfo_contactInput__qyXw3",saveContact:"ContactInfo_saveContact__1xH44"}},74:function(e,t,a){e.exports={error:"FormControls_error__cvhLt"}},8:function(e,t,a){e.exports={contacts:"Contacts_contacts__2BE7K",contactItem:"Contacts_contactItem__-VAkh",textInfo:"Contacts_textInfo__UxqYf",name:"Contacts_name__1R0Q_",photo:"Contacts_photo__3GZ6d",icon:"Contacts_icon__3S2UO",favorite:"Contacts_favorite__1_rYG",btnBlock:"Contacts_btnBlock__1coRQ",showUser:"Contacts_showUser__MQ4Qf",actionBars:"Contacts_actionBars__174XM",search:"Contacts_search__2S7ZP",searchInput:"Contacts_searchInput__3q72m",actionButtons:"Contacts_actionButtons__SWl8w",favoritesFilter:"Contacts_favoritesFilter__1jTGv",sortBtn:"Contacts_sortBtn__RAzhO"}}},[[122,1,2]]]);
//# sourceMappingURL=main.0517dbd0.chunk.js.map